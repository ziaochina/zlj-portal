!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("MK.utils"),require("MK.metaEngine"),require("immutable"),require("react"),require("MK.component")):"function"==typeof define&&define.amd?define(["MK.utils","MK.metaEngine","immutable","react","MK.component"],t):"object"==typeof exports?exports.MKApp_zlj_portal=t(require("MK.utils"),require("MK").metaEngine,require("immutable"),require("react"),require("MK.component")):e.MKApp_zlj_portal=t(e.MK.utils,e["MK.metaEngine"],e.Immutable,e.React,e.MK.component)}(window,function(e,t,n,o,r){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={webapi:function(e){return e&&e.__esModule?e:{default:e}}(n(9)).default,webapiMap:{"portal.init":"/v1/portal/init","user.logout":"/v1/user/logout"},websiteName:"某某系统",logo:"logo.png",goAfterSignOut:{appName:"zlj-sign-in",appParams:{}},menu:[{key:"1",name:"首页",appName:"zlj-home",icon:"home",fontFamily:"awesome",isDefault:!0}]};function r(e){e&&Object.assign(o,e)}r.current=o,t.default=r,e.exports=t.default},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.getMeta=function(){var e,t;return{name:"root",component:"Layout",className:"zlj-portal",children:[{name:"header",component:"Layout",className:"zlj-portal-header",children:[{name:"left",component:"Layout",className:"{{'zlj-portal-header-left zlj-portal-header-left-' + (data.isFoldMenu?'fold':'unfold') }}",children:[{name:"logo",component:"::img",className:"zlj-portal-header-left-logo",src:"{{$getConfig().logo}}"},{name:"siteName",component:"::h3",children:"{{$getConfig().websiteName}}",_visible:"{{!data.isFoldMenu}}"}]},{name:"center",component:"Layout",className:"zlj-portal-header-center",children:[{name:"foldMenu",component:"Layout",className:"zlj-portal-header-center-foldMenu",_visible:!1,children:[{name:"foldMenu",component:"Icon",type:"{{data.isFoldMenu ? 'menu-unfold' :'menu-fold'}}",title:"收起菜单",showStyle:"showy",style:{fontSize:19},onClick:"{{$foldMenu}}"}]},{name:"tabs",component:"Layout",className:"zlj-portal-header-center-tabs",children:(e={name:"tabs",component:"Tabs",type:"card"},o(e,"type","editable-card"),o(e,"hideAdd",!0),o(e,"activeKey","{{data.content && data.content.name}}"),o(e,"onChange","{{$tabChange}}"),o(e,"onEdit","{{$tabEdit}}"),o(e,"_visible","{{ data.isTabsStyle && data.openTabs && data.openTabs.length > 0}}"),o(e,"children",[{name:"tab1",component:"Tabs.TabPane",key:"{{data.openTabs[_rowIndex].name}}",tab:"{{data.openTabs[_rowIndex].name}}",_power:"for in data.openTabs"}]),e)}]},{name:"right",component:"Layout",className:"zlj-portal-header-right",children:[{name:"search",component:"Popover",placement:"bottomRight",children:{name:"search",component:"Layout",className:"zlj-portal-header-right-search",children:{name:"icon",component:"Icon",fontFamily:"awesome",showStyle:"blueSky",type:"search"}},content:{name:"search",component:"Input.Search"}},{name:"notice",component:"Popover",placement:"bottomRight",autoAdjustOverflow:!0,overlayStyle:{width:300},children:{name:"notice",component:"Layout",className:"zlj-portal-header-right-search",children:{name:"badge",component:"Badge",count:5,offset:[0,2],children:{name:"icon",component:"Icon",fontFamily:"awesome",showStyle:"blueSky",type:"bullhorn"}}},content:{name:"notice",component:"AppLoader",appName:"zlj-portal-notice"}},{name:"topMenu",component:"Layout",className:"zlj-portal-header-right-topMenu",children:[{name:"topMenu",component:"Menu",className:"zlj-portal-header-right-topMenu",mode:"horizontal",onClick:"{{$topMenuClick}}",selectedKeys:[],children:[{name:"toggleTabs",component:"Menu.Item",key:"toggleTabs",_visible:!1,children:[{name:"icon",component:"Icon",type:"appstore-o"},"{{data.isTabsStyle ? '正常风格' : '多页签显示风格'}}"]},{name:"gitter",component:"Menu.Item",key:"gitter",_visible:!1,children:[{name:"icon",component:"Icon",fontFamily:"awesome",type:"wechat"},"聊天"]},{name:"github",component:"Menu.Item",key:"github",_visible:!1,children:[{name:"icon",component:"Icon",type:"github"},"源代码"]},{name:"my",component:"Menu.SubMenu",key:"my",title:{name:"myTitle",component:"::span",className:"zlj-portal-header-right-my-title",children:[{name:"photo",component:"::img",className:"zlj-portal-header-right-photo",src:"{{$getPhoto()}}"},"{{data.other.currentUser?data.other.currentUser.name:'13334445556'}}"]},children:[{name:"mySetting",component:"Menu.Item",key:"mySetting",children:"个人设置"},{name:"logout",component:"Menu.Item",key:"logout",children:"注销"}]}]}]}]}]},{name:"content",component:"Layout",className:"zlj-portal-content",children:[{name:"left",component:"Layout",className:"{{'zlj-portal-content-left zlj-portal-content-left-' + (data.isFoldMenu?'fold':'unfold') }}",style:"{{({overflow:data.isFoldMenu?'visible':'auto'})}}",children:[{name:"menu",component:"Menu",mode:"vertical",theme:"dark",className:"zlj-portal-content-left-menu",inlineCollapsed:"{{data.isFoldMenu}}",selectedKeys:"{{$getMenuSelectKeys()}}",defaultOpenKeys:"{{data.menuDefaultOpenKeys}}",onClick:"{{$menuClick}}",getPopupContainer:function(){return document.querySelector(".zlj-portal-content-left-menu")},children:"{{$getMenuChildren()}}"},{name:"foldMenu",component:"Layout",className:"zlj-portal-content-left-foldMenu",children:[{name:"foldMenu",component:"Icon",type:"{{data.isFoldMenu ? 'menu-unfold' :'menu-fold'}}",title:"{{data.isFoldMenu ? '展开菜单' :'收起菜单'}}",showStyle:"showy",style:{fontSize:19},onClick:"{{$foldMenu}}"}]}]},{name:"container",component:"Layout",children:[(t={name:"tabs",component:"Tabs",className:"zlj-portal-content-tabs",type:"card"},o(t,"type","editable-card"),o(t,"hideAdd",!0),o(t,"activeKey","{{data.content && data.content.name}}"),o(t,"onChange","{{$tabChange}}"),o(t,"onEdit","{{$tabEdit}}"),o(t,"_visible","{{ data.isTabsStyle && data.openTabs && data.openTabs.length > 0}}"),o(t,"_visible",!1),o(t,"children",[{name:"tab1",component:"Tabs.TabPane",key:"{{data.openTabs[_rowIndex].name}}",tab:"{{data.openTabs[_rowIndex].name}}",_power:"for in data.openTabs"}]),t),{name:"main",component:"Layout",className:"zlj-portal-content-main",_visible:"{{!!(data.content && data.content.appName)}}",children:{name:"main",component:"Layout",children:{name:"app",component:"AppLoader",appName:"{{ data.openTabs && data.openTabs.length > 0 && data.openTabs[_rowIndex].appName }}",onPortalReload:"{{$load}}",setPortalContent:"{{$setContent}}","...":"{{data.openTabs && data.openTabs.length > 0 && data.openTabs[_rowIndex].appProps}}",isTabStyle:"{{data.isTabsStyle}}",_notRender:"{{ !(data.content && data.content.name == data.openTabs[_rowIndex].name) }}",_power:"for in data.openTabs"}}}]}]},{name:"issue",component:"Movable",_visible:!1,onClick:"{{$issueClick}}",style:{bottom:30,left:8,width:50,height:50},children:{name:"btn",component:"Button",type:"showy",children:"填问题"}}]}},t.getInitState=function(){return{data:{menu:[],menuSelectedKeys:[],menuDefaultOpenKeys:[],content:{},openTabs:[],isTabsStyle:!0,isFoldMenu:!0,other:{}}}}},function(e,t,n){e.exports=n.p+"photo.png"},function(e,t){e.exports=n},function(e,t,n){e.exports=n(7)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=n(8);n.p=window["__pub_"+r.name+"__"];var a=n(3),i=n(0);n(10),n(11),n(4),n(12),t.default={name:r.name,version:r.version,description:r.description,meta:a.getMeta(),components:[],config:i,load:function(e){e(o.defaultComponent,n(14),n(20))}},e.exports=t.default},function(e){e.exports={isMKApp:!0,name:"zlj-portal",description:"zlj-portal",version:"1.0.0",license:"MIT",author:"",keywords:["mk","monkey king","react","redux","mk-js","mk-command","zlj-portal"],repository:{type:"git",url:"https://github.com/ziaochina/zlj-portal.git"},bugs:{url:"https://github.com/ziaochina/zlj-portal/issues"},homepage:"https://github.com/ziaochina/zlj-portal#readme",scripts:{start:"mk start",build:"mk build",pkg:"mk pkg"},dependencies:{"mk-command":"*"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=function(e){return e&&e.__esModule?e:{default:e}}(n(0));var a=function(e){return r.default.current.webapiMap[e]};t.default={portal:{init:function(e){return o.fetch.post(a("portal.init"),e)}},user:{logout:function(){return o.fetch.post(a("user.logout"),option)}}},e.exports=t.default},function(e,t,n){"use strict";var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(o=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&c.return&&c.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=n(1),a=r.fetch.mockData;function i(){a.users||(a.users=[{id:1,mobile:1,password:"1"}])}r.fetch.mock("/v1/portal/init",function(e,t){if(i(),t&&t.token){var n=t.token.split(","),r=o(n,6),c=r[0],u=r[1],s=r[2],l=r[3],p=r[4],m=r[5],f=a.users.find(function(e){return e.id==c});return f?f.nickname=f.nickname||f.mobile:(f={id:c,mobile:u,password:s,nickname:l||u,sex:p,birthday:m},a.user.push(f)),{result:!0,value:{user:f}}}return{result:!0,value:{}}}),r.fetch.mock("/v1/logout",function(){return i(),r.fetch.clearAccessToken(),{result:!0,value:!0}})},function(e,t,n){e.exports=n.p+"logo.png"},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(15)),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=function(e){var t=new a.action(e),n=new p(r({},e,{metaAction:t})),o=r({},t,n);return t.config({metaHandlers:o}),o};s(n(18)),n(19);var a=n(2),i=n(5),c=n(1),u=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var i=t[r](a),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){o("next",e)},function(e){o("throw",e)});e(c)}("next")})}}var p=function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onInit=function(e){var t=e.component,n=e.injections;r.component=t,r.injections=n,n.reduce("init"),r.load(),c.history.listen("zlj-portal",r.listen)},this.listen=function(e,t,n){var o=r.metaAction.gf("data.content.appName"),a=e;a?a!=o&&r.setContent("",a):r.injections.reduce("closeAll")},this.componentWillUnmount=function(){c.history.unlisten("zlj-portal",r.listen)},this.load=l(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.webapi.portal.init();case 2:(t=e.sent).user?(r.metaAction.context.set("currentUser",t.user),r.metaAction.sf("data.other.currentUser",(0,i.fromJS)(t.user))):(r.metaAction.context.set("currentUser",void 0),r.component.props.onRedirect&&r.config.goAfterSignOut&&r.component.props.onRedirect(r.config.goAfterSignOut)),t.menu&&r.injections.reduce("load",{menu:t.menu});case 5:case"end":return e.stop()}},e,r)})),this.getLogo=function(){return r.config.logo},this.getConfig=function(){return r.config},this.getPhoto=function(){return n(4)},this.getCurrentUser=function(){return r.metaAction.context.get("currentUser")||{}},this.getMenuChildren=function(){return{_isMeta:!0,value:function e(t,n){var o=[];return t.forEach(function(t){var r={name:t.key,key:t.key};t.isGroup?(r.component="Menu.ItemGroup",r.title=t.name,t.children&&(r.children=e(t.children,n+1))):t.children?(r.component="Menu.SubMenu",r.children=e(t.children,n+1),t.icon||1==n?r.title=[{name:"icon",component:"Icon",className:"anticon",type:t.icon||"desktop",fontFamily:t.fontFamily},{name:"name",component:"::span",children:t.name}]:r.title=t.name):(r.component="Menu.Item",t.icon||1==n?r.children=[{name:"icon",component:"Icon",type:t.icon||"desktop",className:"anticon",fontFamily:t.fontFamily},{name:"name",component:"::span",children:t.name}]:r.children=t.name),!1!==t.isVisible&&o.push(r)}),o}(r.metaAction.gf("data.menu").toJS(),1)}},this.topMenuClick=function(){var e=l(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.key,e.next="logout"===e.t0?3:"github"===e.t0?5:"gitter"===e.t0?7:"mySetting"===e.t0?9:"toggleTabs"===e.t0?13:14;break;case 3:return r.component.props.onRedirect&&r.config.goAfterSignOut&&(r.metaAction.context.set("currentUser",void 0),c.fetch.clearAccessToken(),r.component.props.onRedirect(r.config.goAfterSignOut)),e.abrupt("break",14);case 5:return window.open("https://www.github.com/ziaochina/mk-demo"),e.abrupt("break",14);case 7:return window.open("https://gitter.im/mk-js/mk-js?utm_source=share-link&utm_medium=link&utm_campaign=share-link"),e.abrupt("break",14);case 9:if(r.config.apps["mk-app-my-setting"]){e.next=11;break}throw"不存在mk-app-my-setting应用，该功能不能使用";case 11:return r.setContent("个人设置","mk-app-my-setting"),e.abrupt("break",14);case 13:r.metaAction.sf("data.isTabsStyle",!r.metaAction.gf("data.isTabsStyle"));case 14:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),this.menuClick=function(e){var t=function t(n){var o=!0,r=!1,a=void 0;try{for(var i,c=n[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var u=i.value;if(u.key==e.key)return u;if(u.children){var s=t(u.children);if(s)return s}}}catch(e){r=!0,a=e}finally{try{!o&&c.return&&c.return()}finally{if(r)throw a}}}(r.metaAction.gf("data.menu").toJS());t&&r.setContent(t.name,t.appName,t.appParams)},this.issueClick=function(){window.open("https://github.com/ziaochina/mk-demo/issues/new")},this.getMenuSelectKeys=function(){var e=r.metaAction.gf("data.content");if(e)return[r.metaAction.gf("data.menuKeyNameMap").get(e.get("name"))]},this.tabChange=function(e){var t=r.metaAction.gf("data.openTabs").find(function(t){return t.get("name")==e});r.setContent(t.get("name"),t.get("appName"),t.get("appProps"))},this.tabEdit=function(e,t){"remove"==t&&r.injections.reduce("closeContent",e)},this.setContent=function(e,t,n){r.injections.reduce("setContent",e,t,n)},this.foldMenu=function(){r.metaAction.sf("data.isFoldMenu",!r.metaAction.gf("data.isFoldMenu")),setTimeout(function(){var e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!0),window.dispatchEvent(e)},0)},this.metaAction=t.metaAction,this.config=u.default.current,this.webapi=this.config.webapi};e.exports=t.default},function(e,t,n){e.exports=n(16)},function(e,t,n){var o=function(){return this}()||Function("return this")(),r=o.regeneratorRuntime&&Object.getOwnPropertyNames(o).indexOf("regeneratorRuntime")>=0,a=r&&o.regeneratorRuntime;if(o.regeneratorRuntime=void 0,e.exports=n(17),r)o.regeneratorRuntime=a;else try{delete o.regeneratorRuntime}catch(e){o.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,o=Object.prototype,r=o.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",s="object"==typeof e,l=t.regeneratorRuntime;if(l)s&&(e.exports=l);else{(l=t.regeneratorRuntime=s?e.exports:{}).wrap=w;var p="suspendedStart",m="suspendedYield",f="executing",d="completed",h={},y={};y[i]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(O([])));v&&v!==o&&r.call(v,i)&&(y=v);var b=x.prototype=k.prototype=Object.create(y);j.prototype=b.constructor=x,x.constructor=j,x[u]=j.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===j||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(b),e},l.awrap=function(e){return{__await:e}},_(T.prototype),T.prototype[c]=function(){return this},l.AsyncIterator=T,l.async=function(e,t,n,o){var r=new T(w(e,t,n,o));return l.isGeneratorFunction(t)?r:r.next().then(function(e){return e.done?e.value:r.next()})},_(b),b[u]="Generator",b[i]=function(){return this},b.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},l.values=O,z.prototype={constructor:z,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(o,r){return c.type="throw",c.arg=e,t.next=o,r&&(t.method="next",t.arg=n),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;L(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:O(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=n),h}}}function w(e,t,n,o){var r=t&&t.prototype instanceof k?t:k,a=Object.create(r.prototype),i=new z(o||[]);return a._invoke=function(e,t,n){var o=p;return function(r,a){if(o===f)throw new Error("Generator is already running");if(o===d){if("throw"===r)throw a;return A()}for(n.method=r,n.arg=a;;){var i=n.delegate;if(i){var c=S(i,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var u=M(e,t,n);if("normal"===u.type){if(o=n.done?d:m,u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}(e,n,i),a}function M(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function k(){}function j(){}function x(){}function _(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function T(e){var t;this._invoke=function(n,o){function a(){return new Promise(function(t,a){!function t(n,o,a,i){var c=M(e[n],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?Promise.resolve(s.__await).then(function(e){t("next",e,a,i)},function(e){t("throw",e,a,i)}):Promise.resolve(s).then(function(e){u.value=e,a(u)},i)}i(c.arg)}(n,o,t,a)})}return t=t?t.then(a,a):a()}}function S(e,t){var o=e.iterator[t.method];if(o===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,S(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=M(o,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function z(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function t(){for(;++o<e.length;)if(r.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=n,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t){e.exports=o},function(e,t){e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=function(e){var t=new a.reducer(e),n=new s(o({},e,{metaReducer:t}));return o({},t,n)};var r=n(5),a=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),c=n(3),u=n(1);var s=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init=function(e,t){return e=n.metaReducer.init(e,(0,c.getInitState)()),n.config.menu&&!n.config.webapi.getMenu?n.load(e,{menu:n.config.menu}):e},this.load=function(e,t){var o=t.menu;if(!o||0==o.lenght)return e;var a,i,c=[],s={},l={};!function e(t){return t.forEach(function(t){s[t.name]=t.key,t.appName&&(l[t.appName]={name:t.name,props:t.appParams||{}}),t.children?(t.isExpand&&c.push(t),e(t.children)):(i||(i=t),t.isDefault&&(a=t))}),[]}(o),a=a||i;var p=(0,r.fromJS)(a?[a.key]:[]),m=(0,r.fromJS)(c.map(function(e){return e.key})),f=a||{};e=n.metaReducer.sf(e,"data.menu",(0,r.fromJS)(o)),e=n.metaReducer.sf(e,"data.menuKeyNameMap",(0,r.fromJS)(s)),e=n.metaReducer.sf(e,"data.menuAppNameMap",(0,r.fromJS)(l)),e=n.metaReducer.sf(e,"data.menuSelectedKeys",p),e=n.metaReducer.sf(e,"data.menuDefaultOpenKeys",m);var d=u.history.getChildApp("portal");return d?n.setContent(e,"",d):n.setContent(e,f.name,f.appName,f.appProps)},this.setContent=function(e,t,o,a){var i=n.metaReducer.gf(e,"data.content");if(i&&o==i.get("appName"))return e;var c=n.metaReducer.gf(e,"data.menuAppNameMap");t&&o&&c.getIn([o,"name"])!=t&&(c=c.set(o,(0,r.fromJS)({name:t,props:a})),e=n.metaReducer.sf(e,"data.menuAppNameMap",c)),t=c.getIn([o,"name"]),a=a||c.getIn([o,"props"]);var s=(0,r.fromJS)({name:t,appName:o,appProps:a});e=n.metaReducer.sf(e,"data.content",s);var l=n.metaReducer.gf(e,"data.openTabs")||(0,r.List)(),p=l.findIndex(function(e){return e.get("name")==t||e.get("appName")==o}),m=-1!=p,f=n.metaReducer.gf(e,"data.isTabsStyle");return m?f?e=n.metaReducer.sf(e,"data.openTabs."+p,s):(l=(0,r.List)().push(s),e=n.metaReducer.sf(e,"data.openTabs",l)):(l=f?l.push(s):(0,r.List)().push(s),e=n.metaReducer.sf(e,"data.openTabs",l)),setTimeout(function(){u.history.pushChildApp("portal",s.get("appName"))},0),e},this.closeContent=function(e,t){var o=n.metaReducer.gf(e,"data.openTabs")||(0,r.List)(),a=o.findIndex(function(e){return e.get("name")==t});return o=o.remove(a),e=n.metaReducer.sf(e,"data.openTabs",o),n.metaReducer.sf(e,"data.content",o.get(o.size-1))},this.closeAll=function(e){return e=n.metaReducer.sf(e,"data.openTabs",new r.List),n.metaReducer.sf(e,"data.content",new r.Map)},this.metaReducer=t.metaReducer,this.config=i.default.current};e.exports=t.default}])});